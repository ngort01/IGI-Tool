<html lang="en">

<head>
    <meta name="generator" content="HTML Tidy for HTML5 (experimental) for Windows https://github.com/w3c/tidy-html5/tree/c63cc39" />
    <meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IGI - Tool</title>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <link rel="stylesheet" href="css/main.css" />
	<link rel="stylesheet" href="css/l.geosearch.css" />
	<link rel="stylesheet" href="css/jquery.ferro.ferroMenu.css" />
	<link rel="stylesheet" href="fonts/font-awesome/css/font-awesome.css" />
	<link rel="stylesheet" href="css/bootstrap.min.css">

	</head>

<body style="overflow: hidden">
	 <hr />
	 <!--<div class="circle-image"; ></div>-->
	 <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-bottom" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
					
                </button>
				
                                
                <div id="text" >
					<h4>Controls:</h4>
                    <button id="start_button" onclick="speechButton(event);">
                        Start Speech Recognition
                    </button>
                </div>

                <a class="navbar-brand" href="#">Projectname</a>
				<hr>
				
			</div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#">About</a>
                    </li>
                    <li>
                        <a href="#">Contact</a>
                    </li>
                </ul>
            </div>
			
			
            <!-- /.navbar-collapse -->
        </div>
		
		
        <!-- /.container -->
    </nav>
	
   
   	<!-------------------- Grid layout ----------------->
	<div class="container-fluid">
      <div class="row">
        <div class="col-md-1">
			<div id="gestures" class="panel panel-default">
				<div class="panel-body">
					<div id="pan">
						<img src="img/pan.png" class="img-responsive center-block">
					</div>
					<div id="zoom">
						<img src="img/zoom.png" class="img-responsive center-block">
					</div>
					<div id="select">
						<img src="img/select.png" class="img-responsive center-block">
					</div>
					<div id="select">
						<img src="img/select.png" class="img-responsive center-block">
					</div>
					<div id="select">
						<img src="img/select.png" class="img-responsive center-block">
					</div>
					<div id="select">
						<img src="img/select.png" class="img-responsive center-block">
					</div>
					<div id="select">
						<img src="img/select.png" class="img-responsive center-block">
					</div>	
					<div id="select">
						<img src="img/select.png" class="img-responsive center-block">
					</div>	
					<div id="select">
						<img src="img/select.png" class="img-responsive center-block">
					</div>	
					<div id="select">
						<img src="img/select.png" class="img-responsive center-block">
					</div>						
				</div>
			</div>
        </div>
        <div id="map-area" class="col-md-11">
          <div id="map"></div>
        </div>
      </div>
    </div>
	<!----------------- Circle menu items ----------------->
	<ul id="nav">
	<li><a id="poi" href="javascript:void(0);"><i class="icon-map-marker"></i></a></li>
	<li><a href="javascript:alert('Works!');"><i class="icon-camera"></i></a></li>
	</ul>
	
    <!--------------------- Javascript -------------------->	
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
	<script src="js/jquery-1.11.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/l.control.geosearch.js"></script>
	<script src="js/l.geosearch.provider.openstreetmap.js"></script>
	<script src="js/jquery.ferro.ferroMenu-1.2.3.min.js"></script>
	<script src="js/jquery.slimscroll.min.js"></script>
	<script src="http://js.leapmotion.com/leap-0.6.3.min.js"></script>
	<script src="http://js.leapmotion.com/leap-plugins-0.1.9.min.js"></script>
	<script src="//js.leapmotion.com/leap.rigged-hand-0.1.5.min.js"></script>
	<script src="js/leap-controller.js"></script>
	<script src="js/poi.js"></script>
	<script src="js/map.js"></script> 
	<script>

		var recognition = new webkitSpeechRecognition();
		var final_transcript = '';
		var interim_transcript = '';
		var language = 'en-GB'; // TODO: fetch language as option value from drop down box
		 // en-GB

		recognition.continuous = true; // keep processing input until stopped
		recognition.interimResults = true; // show interim results
		recognition.lang = language; // specify the language

		recognition.onresult = function (event) {
			// Assemble the transcript from the array of results
			for (var i = event.resultIndex; i < event.results.length; ++i) {
				if (event.results[i].isFinal) {
					final_transcript = event.results[i][0].transcript;
				} else {
					interim_transcript = event.results[i][0].transcript;
				}
			}

			console.log("interim: " + interim_transcript);
			console.log("final: " + final_transcript);

			// update the web page
			if (final_transcript.length > 0) {
				$('#transcript').html("final:" + final_transcript);
			}

			if (interim_transcript.length > 0) {
				$('#interim').html("interim:" + interim_transcript);
			}

			// handling commands

			//////////////////////////////////////////////////////////
			/////Start using navigation controls//////////////////////
			//////////////////////////////////////////////////////////
			if (final_transcript.indexOf("zoom in") >= 0) {
				// Code for zooming in
				// map.zoomIn(1);
				console.log("Zoomed in");
				final_transcript = '';
			}

			if (final_transcript.indexOf("zoom out") >= 0) {
				// Code for zooming out
				// map.zoomOut(1);
				console.log("Zoomed out");
				final_transcript = '';
			}
			 if ((final_transcript.indexOf("left") >= 0) 
				||(final_transcript.indexOf("net") >= 0)
				||(final_transcript.indexOf("next") >= 0))				{
				//centerPoint = map.getCenter();
				//var m = (map.getBounds().getEast()- map.getBounds().getWest())/4;
                //centerPoint.lng -= Math.abs(m);
                //map.panTo(centerPoint);
                console.log("Panned Left by ");// + Math.abs(m));
                final_transcript = '';
            }

            if  ((final_transcript.indexOf("right") >= 0) 
				|| (final_transcript.indexOf("white") >= 0)
				|| (final_transcript.indexOf("fight") >= 0)){
				//centerPoint = map.getCenter();
				//var m = (map.getBounds().getEast()- map.getBounds().getWest())/4;
                //centerPoint.lng += Math.abs(m);
                //map.panTo(centerPoint);
                console.log("Panned right by ");// + Math.abs(m));
                final_transcript = '';
            }

            if ((final_transcript.indexOf("up") >= 0) 
				|| (final_transcript.indexOf("apple") >= 0)){
				
                //centerPoint = map.getCenter();
				//var m = (map.getBounds().getNorth() - map.getBounds().getSouth())/4;
                //centerPoint.lat += m;
                //map.panTo(centerPoint);
                console.log("Panned up by ");// + Math.abs(m));
                final_transcript = '';
            }

            if (final_transcript.indexOf("down") >= 0) {
				//centerPoint = map.getCenter();
				//var m = (map.getBounds().getNorth() - map.getBounds().getSouth())/4;
                //centerPoint.lat -= m;
                //map.panTo(centerPoint);
                console.log("Panned down by ");//+ Math.abs(m));
                final_transcript = '';
            }


		}
		
		function speechButton(event) {
				final_transcript = '';
				recognition.start();
		}

	</script>




	
</body>

</html>
